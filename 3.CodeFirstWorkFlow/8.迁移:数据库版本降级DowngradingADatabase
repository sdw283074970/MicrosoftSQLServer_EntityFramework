//Q: 什么是数据库降级？
//A: 数据库降级指将数据库恢复成之前某一时间点的状态。

//Q: 为什么需要数据库降级？
//A: 两种情况。第一种，在某一时间点犯了一个不可修复或很难修复的问题；第二种，需要同时维护不同版本的应用程序(不同版本的程序依赖不同版本的数据库)，即需要
  //返回到之前某一时间点状态的数据库取得一些必要数据，取完后还需要将数据库重新更新回来。

//Q: 如何让数据库降级？
//A: 两种选择。第一种，使用一个新的空数据库，跟随以下步骤：
  //1.取得校验后的旧版本数据库；
  //2.在connectionString中更改连接的数据库的名称；
  //3.在PM中使用update-database命令同步数据库。

//第二种，如果只能在现有数据库的基础上对其进行降级，跟随以下步骤：
  //1.找到目标时间点数据库迁移文件，如该文件名称为F；
  //2.在PM中使用参数命令update-database -TargetMigration:[TargetMigrationName], 在这里即update-database -TargetMigration:F.

//第二种方法的原理为，EF会对比目标时间点和当前时间点，然后会反向执行目标时间点后所有迁移文件的Down方法，之后让整个Model处于刚刚执行完目标时间点迁移
  //文件的状态。如，目标时间点(目标版本)为迁移文件F，当前迁移文件为H，在我们键入PM参数命令回到F时间点后，EF会按顺序执行迁移文件H，G的Down方法，让整个
  //Model和数据库回到刚刚执行完迁移文件F的状态。此时迁移文件G和H仍然存在，但EF无法识别，如果想返回最新版本，只用在PM中键入update-database，EF就会自动
  //执行F以后所有的迁移文件，即回到最新版本。

//注意，在结束数据降级相关工作后，一定要执行一次update-database命令返回最新版本，否则EF是认不出旧版本到新版本之间的迁移文件的，即不可以连续执行类似于
  //update-database -TargetMigration:F/ update-database -TargetMigration:G这种操作，因为在执行回到F后，EF并不知道G的存在。如果是想恢复到犯错之前
  //的状态，在百分之百确认要抛弃新版本之后才能删除犯错误的时间点以后的迁移文件，但是仍然不推荐这样做。

//暂时想到这么多，最后更新2017/01/02


//Q: 如何备份迁移文件？
//A: 一个比较推荐的方法是将迁移文件转换为Sql文件备份。在PM中使用命令Update-Database -Script -SourceMigration:0即可将所有迁移文件转换为Sql文件。
  //在此例中，执行后所有迁移文件将按顺序转换为如下Sql文件：

DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'CodeFirstExistingDb.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '201712121919461_InitialModel'
BEGIN
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201712121919461_InitialModel', N'CodeFirstExistingDb.Migrations.Configuration',  0x1F8B0800000000000400ED5A5F4FE436107FAFD4EF10E5A9ADB80D702F2DDABD135DA0423DFE88E54E7D4326995DAC3A4E1A3B6851D54FD6877EA47E854EFEAEE33FD90438AE773A21016B7B7E9E19CF8CC733FBEFDFFF4CDFAE63E6DD432668C267FEDE64D7F780874944F96AE6E772F9EA47FFED9B6FBF991E47F1DAFBD0AC7B5DAC434A2E66FE9D94E9411088F00E622226310DB344244B39099338205112ECEFEEFE14ECED0580103E6279DEF42AE792C6507EC08FF3848790CA9CB0B3240226EA719C5994A8DE398941A42484993FC715273413F2784D8544368F6E7DEF905182AC2C802D7D8F709E482291D183F70216324BF86A91E20061D70F29E0BA2561026A010E36CB87CAB2BB5FC8126C081BA8301732894702EEBDAE9513E8E48F52B1DF2A0FD5778C6A960F85D4A50A67FE612EEF92CCF7F4AD0EE62C2B9659F53BA9A8763CCBDC4E6B14683BC50FAECA99CC339871C86546D88E7799DF321AFE0A0FD7C9EFC0673C674CE512F9C4B9CE000E5D66490A997CB88265CDFB69E47B41972ED0095B3285A692EB94CBD7FBBE778E9B935B06AD11283A58C824835F804346244497444AC8788101A51A8DDDB5BD8ADFCD6E6875A81EDF3B23EB77C057F26EE6E3BFBE7742D71035233507EF394587432299E5606C724EEEE9AAE44FDB6E9EE49900E17B57C0CA797147D3CA07EA03BB69979C64497C95B0D6009A999B05FE0D0BAE13EBF435C95620BB3C4D838D55F5DA5A0532D6D62AAAAFB6D66F6BD754B28F606CDA2E4720C28CA6552CFAC87BBD837B60DB14D80F7182CB2F331A6E1483AC166A1A89533B81719E433DB3A27FA26736AEE7F0CCC67187F2744D5676862AC09B6A7EC38D326C040975EE49110211C6860724F91A1B3E9B7B688071E9766E33BC21C675284412D292810E63D5E65D598E79E4F59879A5B90DFFA83E34259AA2F1E0C633FF07433976C056B40D6069F1BD68D34091A45F402D96B858725DF91BAE9AACB0CBD8EE64B2D723A92B5E8DD71EBA1664856D13862F0181CE4AB934FD90F290A684F54AA5510DF4DF42EB2DBE3E730429F0C2F57AE51EB2B172AF98FBB7DB6891659B729CF652B909D248A480ACE6E192E5322906612D2DB1171F4C75F815751CD08FBF005D80D4AFBA8D536A3665D84F17A08D1E0640633D5B00AAD86250978EA6912A8AD219A84394B2C212C1F433EB0F232DA38A90C6B1F7070E05A2E24FBF76BA120D90564F3F4C81FB82CA90B0A2F0DC1A478FD88E28B25D793DC23757446BFB9B7A425015149AC243E0A83C4CCF489AE2C5A95422EA116F5197215E2DC63FCFE30A230885E595DE72DBEE846900598136ABA4454744925B52F8C83C8A8D651D4F77F850B355D799CDD36A9CAB595FFCDFB88FAB5C60098935F9098A151701B54C740C833109CB42106124B36455F384E53177477637759527A9F4D58889300D34CE8DE86DA848B3555DE383CEC3ED83E3CEA38EA4E3CFC345F871CEA37ED3AA00F5D0708CCE8B5545EA4C0CC7AB5FA52A523D341C437996AA38CAF0702C258550B17A328B4F66BD8E2B739CE916D7F878BBB5527DE941A47B1DDA22499DE40C0916F5527B40B0A8B7B8D1ADEFC24E4E64EA64D089D448F6BC59D9781C4FCEC47D104F083192213D61310FD1C85BF425AD09B5F98B96A74CEB9C61441BA54922AA25BE87BCDFD3A84820160F42423C29164C167FB039A368B49B056784D32508591553FCFDDDBD7DAD11F3FF698A0442446C5067E4C5EB41B4D0E9D68ACFC80AA65A02E2F7240BEF48F65D4CD6DFAB486699676C69FFCB5056A7963E425B83EAE54FC2EBD4C44BD99F5A11CF80B0A7D7C34B568CDAC1298F603DF3FF2CA90EBCD3DF6E5AC21DEF22C39071E0ED7A7F3D93091A97D0676B7F2FE3AC8FD457DFDD6BAEB6DF8ADB35ACEC32CEC25A4297850D8B0035DBE3F6AEA8466CFCA8D2B5357732EA4603EAAE7B46CE76C18F808104EF30AC2EE6391121894C7515394DFFFE65B9CD60617BB5FBB1D55FE793F6D9CBBDCE9477B4BB3C7F89B7DF706C09AE7270FA91590EEB8B3299A147F8A2F6E27E46BC80B18CEA1F3DBD613438523D6B87E8E5CEFCB3E901990564474147FBD298B3C753BD1D677E749BE0F156F79FA3F8EF6800F5F47F6CE0AE9E80A539E4EA0DD960AD4D163BC3766465CE81EFE27C5B6FAAEDAFF4B6A81C85168B139A55DEEDCD294566AD1AF4F4C694ADFDD52FAABD7EA35F705A55F0D30AF9ECDD374BBB6D8088034EFF79BA6B66350A6399F2D55F0CA482AE3610C5178139849D28D6AE39E5CBA489A71A47CD122DAD3F0349220C718799A44B124A9C0E4188F20B311F08CB71C9717C0BD129BFC8659A4B1419E25BD6F9824D1194FBF62F5B885D9EA7176505403C8708C8264511E082FF9C5316B57C9F585E170E8822DAD7AFD5E22C65F16A5D3DB448E7091F0854ABAFBDA4AE214E1982890BBE20F7F018DEDE0B78072B123E34454537C8F683E8AA7D7A44C92A23B1A83136F4F8116D388AD76FFE03484FCF01012F0000 , N'6.1.3-40302')
END

IF @CurrentMigration < '201712121929233_AddCategoriesTable'
BEGIN
    CREATE TABLE [dbo].[Categories] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](max),
        CONSTRAINT [PK_dbo.Categories] PRIMARY KEY ([Id])
    )
    INSERT INTO Categories VALUES ('Web Development')
    INSERT INTO Categories VALUES ('Xamarin Development')
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201712121929233_AddCategoriesTable', N'CodeFirstExistingDb.Migrations.Configuration',  0x1F8B0800000000000400ED1BDB6EDB36F47DC0FE41D0D336A45692BE6C81DD227392215873419C167B0B6889768851944652818D615FB6877DD27E61475753BCC8529C646B1714486392E77EE1E139CEDF7FFE357EBF8AA9F780B920099BF807A37DDFC32C4C22C296133F938B37DFFBEFDF7DFDD5F8348A57DEA7FADCDBFC1C403231F1EFA54C8F824084F7384662149390272259C85198C4018A92E0707FFF87E0E020C080C2075C9E37BEC99824312E3EC0C769C2429CCA0CD18B24C25454EBB0332BB07A9728C62245219EF853387146B890A72B2224B07932F7BD634A10B032C374E17B88B14422098C1E7D14782679C296B3141610BD5DA718CE2D1015B812E06873BCAF2CFB87B92CC106B04615664226F14084076F2BE5043AF8A354EC37CA03F59D829AE53A97BA50E1C43FCEE47DC27D4F277534A53C3F66D5EFA884DAF32C7B7B8D5380EFE4FFE0544665C6F184E14C7244F7BCEB6C4E49F8335EDF26BF62366119A52A97C027ECB51660E99A2729E6727D831715EFE791EF056DB840076CC0149852AE7326DF1EFADE251047738A1B275074309309C73F6186399238BA465262CE721CB850A3415DA395FFACA981D7817A7CEF02AD3E60B694F7131F7EF5BD33B2C251BD5271F09111083800923CC306914BF44096057F1AB96992718185EFDD605AEC8B7B9296315019ECAE3972C693F826A18D03D43B7733F83FCCB94EACDBB7882FB16CF3340E365ED5E96B2592A1BE5642BDFA5AB7AFDD12499FC1D9342A2758849CA4652E7A665A1FF003A6DB14D88DE20C8E5F73126E1403ACE66A1A88A70A02C39E7D23B384DF3132EBD07344661DB87D79BA454B3B4325C2BB727FC38DB26C2409756FA70C011886A6070079CD0D9FCD3DD4C3B9743FB739DEE3AE1F50DE32E1EBC1175005F7EA662FEE662EDB1E0B9184A4E0BAE574A563B5B93C6591D791C24A7637BE093C83FD480A1603C213FF3B436C3BC2C66D37088B6CD6896D1C2892740BA8DD132E965CE5DC86ABBAE26F33B63F1A1D7448EABA8B866B0FFC19F3DCA11085579E8008214C9ACE4F584852443BA5D2A07A064DAEF506BFBE738253CC727FEF94BB0F61A56630E93764B470DEA61CA7BF94610230122030AF78B8A6994CF245BC9296AC078FE12AF1892AF874F3E7486758EA65CC2628359F32FCA78DA0B9190C04B5F76C4150DE1B06741168DB6897599CD8C9375783864551B72E46758929272C779C6EF9EE64D4F0ACA8CA709EEEF4A3A028F9D36F8CB6443DA4D50B5453E0AED4D42739293C372ED621B623176D575E87F0F545D344D0A6E314942DA7BA3515387A53E30B94A670E729BDAA6AC59B558DAA37B3E10D9CB8C41184C2D2C769B86D28C10D8E9658DB55CA9A1324D11CE591368D62E3582B5F38C2A926D54E09A6B5EA08ABCFE7BFD7E1E36A2859126B057E0662C5795A2E6A14C3614CC0A2558828E29682689AD02C66EEFBC10D5D96382A7CB9626218071AE7C61D60A848F3555DE3BDECE18EC161F6A8F2F1707BB8009FC71E55D74345502DF5C7D1EA69A8985A1BFDF1557D0B1553B5D41F87D2B850F128CBFD712985888AABA33EF9D7BCD771650E73DDBC1818EEB756A8FF6B12D9944A3BE791BAB07A442671827EE966695729B6045FD59E7D727875D49EA72D5E9F175AD6864EAB543575D2CB221526FBA348213C8C27E7ABAC174F806220437A1D691AD12827F5238D0B3565A5563E8EAB526EC0FCB3AEEDCA23BE07BC3F9028AFEB666B21713CCA0F8C66BFD12925E0B49B031788910516B26C4FF987FB0787DA04F5BF33CD0C848868AF91E68B77D848AED3AD3DB481A307B5A9C61E100FEF11FF2646AB6F554CFD1B67AE99DC97A1ACD6106C80B67A0DBA76C2D71A6615B2EF3ACAE218D1DD0759052B4663E89C457835F17F2FA08EBCF35FEE1AC03DEF8A43CA38F2F6BD3F9EC8058D4BE8B3F5BF670F566B49F4AA2E97BAEC354E3F7D75952AE6697B11B15DC30A956101D900BA02B25FC2ACD81E46BB841A40F851631C6BA969743F7BCC200E8C12F78A9D608A25F68EC3B28E992211A2C854575E0276D32F5ACF060BDB273F8F9D84381B334F3EFA70BE100687CBD38F3BBA1DC7F61E500CA79BCC62AC2FCA65FA9AF045FDC5FDEA7A016719344BDD7D78DA3B533DE9B4F4E56CFED9CC43CD3188A31FA67D39D639EF2C9FDA133F9A2760DEF2FE738CB01CC3D08E59A80DB96BB2651994BAE6A436B4D651A16382BAEE9C9F5A995646AFBD9462E75ED973C8E0D2CEB6296E3389EC1CE63A7A5F964037E721DBC7B88ACC5A836EF711AE6D50DC2DAABDA5A65FA25AFFFCDF15F2C9E7D496C1740F117B58FF69E6D0668310F2A5F2671490AC05596E50E47F54C170D8CA94CD9973B648EA9CAD71541FD19E0E1758A208D2E8319764814209DB2116A2F8D6D727443338721ACF7174CEAE3299661244C6F19CB6BE629127FE2EFAC5B0BDCDF3F8AA68CA88A71001D8242002BE623F6684460DDF6796178C03457EA3542FE2DC96327F192FD70DA6CB84F54454A9AFB9086F719C524026AED80C3DE0C7F0F651E00F7889C275DDE77523D96E88B6DAC727042D398A458563030F1FC187A378F5EE1F4DCF95394D340000 , N'6.1.3-40302')
END

IF @CurrentMigration < '201712121940587_AddCategoryColumnToCoursesTable'
BEGIN
    ALTER TABLE [dbo].[Courses] ADD [Category_Id] [int]
    CREATE INDEX [IX_Category_Id] ON [dbo].[Courses]([Category_Id])
    ALTER TABLE [dbo].[Courses] ADD CONSTRAINT [FK_dbo.Courses_dbo.Categories_Category_Id] FOREIGN KEY ([Category_Id]) REFERENCES [dbo].[Categories] ([Id])
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201712121940587_AddCategoryColumnToCoursesTable', N'CodeFirstExistingDb.Migrations.Configuration',  0x1F8B0800000000000400ED5B596FE336107E2FD0FF20E8A92DB256927D69037B17A99314413707E264D1B7809668872845A92215D828FACBFAD09FD4BF505227C54387ED788F060BEC2622E7E35C1C0E87B3FFFEFDCFF8FD2AC4CE334C288AC8C43D1A1DBA0E247E1420B29CB8295BBCF9D17DFFEEDB6FC6E741B8723E96F3DE8A799C92D089FBC4587CE279D47F8221A0A310F94944A3051BF951E88120F28E0F0F7FF28E8E3CC8215C8EE538E3BB943014C2EC17FEEB34223E8C590AF05514404C8BEF7C6496A13AD7208434063E9CB8533EE30225949DAF10659CCDB3B9EB9C6204382B338817AE03088918609CD193070A672C89C87216F30F00DFAF63C8E72D00A6B010E0A49EDE5796C363218B571396507E4A59140E043C7A5B28C753C93752B15B298FABEF9CAB99AD85D4990A27EE69CA9EA2C475D4A54EA63811D38CFA1DE554078E61ECA0720AEE3BE20F9F95629626704260CA12800F9CDB748E91FF2B5CDF47BF43322129C632979C4F3ED6F8C03FDD26510C13B6BE838B82F7CBC075BC269DA7125664124D2ED725616F8F5DE79A2F0EE618564E20E960C6A204FE02094C0083C12D600C264460C04C8DDAEACA5AE2EF7235EE755C3DAE7305561F2059B2A789CB7F749D0BB48241F9A5E0E08120BEE138114B52A82D720D9ED132E34F596E1AA50985D475EE20CEC6E9138AF33D5018ECB19A729144E15D842B0728471E67FC5F5F701D1987EF41B284ACC9D3D8ABBDAAD5D77290A1BE9653BDFA5ABBAFDD23865FC0D99455CE20F51314E7B1E885D7FA009F21EE52603BC4059F7E9B20BF560C6755A869204EB109347BF6DD9939FD963BB3DC7A969D596EDCDED182BBD9324AD646A672D0C77A4ECD9532A4050C75DC1431DAF8BA074BB3A20AE07C5CE3477CB6F1928D6D17B92A450C8C5D05DD6BF4DAFB49D9DBB6DC3B869A9593BC5AF48BC97D7A040E35B69A824A1FE73AA534F251C64083B13A9236E5392781D31156730DD6727035729742317722CEC0C4FD4153921DB4125302AD225B13F670343A526596A4EB2574A6F10EDE9A717B07C236ED590366DBBC156D8080CAA16D63C9965BD75C95D7AF2EE5B7C19AACDA537B3C9EC0446C6880F9959BF2088508D3830F223E8A016E954AA1EA19B484D62B7C75E40CC6908878D32A779F85A5044E5FBF5A4609A75DCAB1FA4B1E1B380DE314302978B8C5298BC447B8628603E781C2E2CCA145F053CD2F406790A939651D89149FD2FCA70950854C0DA0F49E2E803C7420334615573A50F2B0ACD167DB552195D4AD8A21A5AAD22C4B36AB7A407714AE9896D4A6395277DC956124E5A9E77853CEFE3AC85569955F0FC79D017933B91B215882C8F9DB5A5AF5C6A40BDC169EFB046889E76A9BB5886D89C7DDCA6B11BECC30AA28529740BDBC065AD64A3D4BB1747C05E298E75D52F1B4F8E2CC8ACAE99BD9F08A629863783E3514162B6EAB9578160996501995B2EA33C0C01C8868330D426D5A23665AE248B954332CEAD62A034C395FFC5C6E1F5B85D370B814E4175CAC501C4D599EAC398C4E98D5AE01068921299F46380D89FD8CB453E769B64C9F7FD111C69EC2B9760E6A2A527C55D5782F7BD8F7E0307B1467D2707BD8085FC61E45194E06283EF5C76814D964A4C6407FBCA2902623159FFA634895341947FADC1F4B4AC664AC961CEDD3796F7D4A6FEDC096ECA38F0B5B49FFA741C592C90C3388C83087DBC248F5B59BA199A59802BC947FF789E3D2F47EF15A645BC6928F9664EBCAE9659A0AC67C4794961FCE99F586BCB1D3B432C4F3A50065C58A4B2A2A7C556DADA7BC6A56BAA94BE4E97E2F77C8A79A5DC1B0E3EC3A976F2F9B7A428EB43B3F90AF431BF2C4210632D46D44ED86A14EA9A24A75D3506E14E322BB1FD0A351A6FBF914D7E1BC3FA340A4FAB33565301C8909A3D91F788A118F63F5842B40D002529657CDDDE3C3A363A5CBE3F3E9B8F0280DB0E176A4B75DECBDF08F844E3B4BFB039F47E55A3F790689FF0492EF42B0FA5E46DAE285C674247CB1CA6A3CD40FD0968E64788CDF0AAFF1E09EC9BEED737B0201DEFEB13D6345AB975E9200AE26EE9F19D58973F9DB634578E0DC243C649C3887CE5F4395D0381787AD2F91F6E760F813F4D7B10D5E3A666859C3ABA66C8E65CEB2FAE9AB2D59D2679BD3986E0D4BAB0CDC9225A16D43F60BD905DBC3D6CEA9062CFC028FCA8D4BD9E0175F436D7F7FAF8C2DF5929D3F2C5A8B8B06876FBF27EEFC2DB1F571DD78D3D9C46647DA0DEB869C410C19744EFD3C8D9E02EA8340DF2BE206D2BE7EF694A7B1D0FD1EBFB1E7F4B7E64EFCC65C481A162BF7ED38A6EBA86438D56406637D552ED3D7847BF517FBA57F0FCE32A8C365FB96967D9F2ED6E7BD4F79B67C0E5D2AFAC3ACA522AFFCFF116B174A5EE999B8C13CE2E6CD931FCBA3BAA545A5A543C5046E7B6BB7B4AFAC5B9B578C0BD85B370CCD2DB6DE1613B2B141C2AC1433B23466C1B769670FBD358ABE9B4F5BDD6D2586868ADDB6CE54ED1FAD1D3496EAF226ECDA0E3E63097CB7A2963D2AEDA29A8BD66A9EA0BC8E7D5A2177DE1C64E8067A71671DD0FCA397E0F99120FD674A7E1E51B4AC21C4EB10817EE330A8E65C9245541E4B0A47E514E56A7C051908F849719A30B4003EE3C33EA4346BF7FE0870CAA79C8773185C929B94C529E322C3708E1BFB5D9C6D6DEB671D4E4D9EC73759D993EE4204CE26E222C01BF2738A7050F17D61B8A15B20C4A159547C842D99A8FC2CD715D275447A0215EAABCEFA7B18C69883D11B3203CF7013DE1E28FC0097C05F972F2976906E4334D53E3E43609980901618353DFF95FB7010AEDEFD07E0B57E7B533C0000 , N'6.1.3-40302')
END

IF @CurrentMigration < '201712121948532_AddDatePublishedColumnToCourseTable'
BEGIN
    ALTER TABLE [dbo].[Courses] ADD [DatePublished] [datetime]
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201712121948532_AddDatePublishedColumnToCourseTable', N'CodeFirstExistingDb.Migrations.Configuration',  0x1F8B0800000000000400ED5BDB6EE336107D2FD07F10F4D416592BC9BEB481BD8BD4498AA09B0B6267D1B7809168872845A92215D828FA657DE827F5174AEA4AF1A28BED782F0D16D84D44CEE1CC7038331CCEFEFBF73FE3F7AB103BCF30A1282213F76874E83A90F85180C872E2A66CF1E647F7FDBB6FBF199F07E1CAF958CE7B2BE6714A4227EE1363F189E751FF0986808E42E427118D166CE447A10782C83B3E3CFCC93B3AF22087703996E38CEF52C25008B35FF8AFD388F8306629C0575100312DBEF3915986EA5C8310D218F870E24EF98C0B945076BE42947136CF1E5DE71423C0599941BC701D4048C400E38C9EDC533863494496B3987F0078BE8E219FB70098C24280937A7A5F590E8F852C5E4D5842F92965513810F0E86DA11C4F25DF48C56EA53CAEBE73AE66B61652672A9CB8A7297B8A12D751973A99E2444C33EA7794531D3886B183CA28B8ED883F7C568A599AC00981294B003E706ED3478CFC5FE17A1EFD0EC984A418CB5C723EF958E303FF749B44314CD8FA0E2E0ADE2F03D7F19A749E4A58914934B95C9784BD3D769D6BBE3878C4B032024907331625F017486002180C6E016330210203666AD45657D6127F97AB71ABE3EA719D2BB0FA00C9923D4D5CFEA3EB5CA0150CCA2F0507F704F103C7895892426D916BF08C96197FCA72D3284D28A4AE730771364E9F509C9F8162C31EAA29174914DE45B8328072E461C6FFF505D79171780E9225644D9EC65E6D55ADB696830CB5B59CEAD5D6DA6D6D8E187E0163535639E3BC650AA54FB0124E7C9CA3B09B18523F4171EEC85E98D10FF019E22EEDB7435CF0E9B709F26BAD7256858E07E21427483386BEC73AA7DFF25897E7D672ACCB53DFDBD5F02D5F46C9DAC8540EFA50CFA9B95286346FA38E9BDC4D1B5F73B0342BAA00CEC7357EC4671B2FD9D8766EAF52C440C757D0BDBABEBD87D9DE7BCBAD63E8B67292D71DFD6212A71E8E43F5AD26A7D2C7B84E298D7C9431D060ACF6A44D79CE49E074B8D55C83B51C5C8DDCA450CC8D883330717FD0946407ADC494402BCFD6843D1C8D8E549925E97A099D69BC83B7A6DFDE81B0CDFDAC01B363DE8A3640402568DB58B225E63557E5DDAD4BF96DB0A65DEDA93DEE4F60220E34C0FCBE4EB9874284E9CE07111FC500B74AA550F5745A42EB15BE3A7206634884BF6995BBCFC25202A7AF5F2DA3B8D32EE558ED25F70D9C86710A98143CDCE29445E2235C3143C0B9A7B08839B4707EEAF60BD019646A4E597B22C5A634FB6902542E530328ADA70B20771DC88C51F9950E94DC2D6BF4D97155482575AB6248A9AA34CB92CDAA16D0ED852BA625B56986D4ED77651849796A1C6FCAD95F07B92AADF2EBEEB8D3216F2677C3054B10397F5B4BABDE987481DBDC731F072DF15C1DB316B12DFEB85B792DC2971946E545EAFAA9971750CB42AB67A9B48EAF401CF3BC4BAABC165F9C5951767D331B5E8E0C730CCFA786AA64C56DB512CF22C1122AA352567D06187804C2DB4C83509BD6F099163F522ED5748BFA6E950EA69C2F7E2E8F8FAD3C6A082E05F905172B14A129CB933583D109B3C237C0203124E5D308A721B1C7483B759E66CBF4F9171D61EC299C6B7150539162ABAAC67BED87FD0C0EDB8F22260DDF0F1BE1CBEC4751C393018A4FFD31940A9D8CA50C0DC0940B770D4479A03F5E519C93918A4FFD31A4EA9C8C237DEE8F25257832564BDEF7E94E441DF9B73E14968CA6CFB1B092FE4F1D95253B1AB621226B1DBE1746AAAF7D1B9A998F296848397D9FD8204DEF17034406672C236989BBAE9C5E5B53C198EF9DD2F2C339B3DEBA37369A5686780E16A0AC00724945D5B0AAD7F59457CD74373589FC0AD1CB1CF2A96653309C38BBCEE51BD1A6969023EDCE0EE42BD6863C7188810C756FA2766B51A7545EA5BABD28B79471716318D034525E21F229AEC3797F4681B83ECCD694C17024268C667FE02946DC8FD513AE00410B48595E89778F0F8F8E95B693CFA705C4A334C0861B97DE07B2F7C7042474DAF95C30F0C9557E3F20CF20F19F40F25D0856DFCB485BBCFA9842C217ABAC46E7C0006DE948C6EE80807F645977C04030BD5B602BE61A1D019922B7ED074820C0DB770364AC6805DD4B12C0D5C4FD33A33A712E7F7BA8080F9C9B84FB9F13E7D0F96BA8121A4176D8FA12697F0E86BF917F1D67EAA51D909682BC6ACA6658E694AD9FBEDA322F7DB63927EAD6B0B4CAC0235912DA0E643FFF5FB03D6CED9C6AC0C22FF0EADDB8E10D7E92363C3EECEF19B4A5F8B2F3974F6BF5D360F0ED97CE9D3F76B6BEFE1BAF4D9BECD991765DBB21671043069D533FCFC9A780FA20D0CF8AB8CEB4AF9FBD356A2C74370C6C6C39FD7773277663AE4A0DF395FB361CD3DD56DA3875CB0C9BF555994CDF2DDCABBDD82B087B3096412D38DBF7DCEC3BBA58DF1F3F656CF91CDA68F497634B795FF9DF31D63699BC6CC46FB98F11DFDE3CF9B1BCFA5B7A685A5A684CE0B666004B7FCDBAB5BBC6B880BDB7C4D07D636BBE31211B3B38CC4A31234B63167C9B76F6D0FCA3E8BBF94ED6DDF762E8F8D86D6F4FD59FD2DAE26329556FC2AE2DF019EBE9BB15B56CA26917D55C0157F304E5A9EDD30AB9F3EE2543BBD28B1BEB80EE24BD9ECF4382F45F45793CA268594388A72602FD4630A8E65C924554862585A3728A7235BE820C043C529C260C2D80CFF8B00F29CDFAD13F029CF229E7E1230C2EC94DCAE294719161F8881BE75DC4B6B6F5B316AC26CFE39BACEC4977210267138912EC0DF9394538A8F8BE30DCD02D10226816151FB1974C547E96EB0AE93A223D810AF555B17E0EC31873307A4366E0196EC2DB3D851FE012F8EBF259C60ED2BD114DB58FCF10582620A405464DCF7FE5361C84AB77FF01A2DA47AF313D0000 , N'6.1.3-40302')
END

IF @CurrentMigration < '201712121951006_RenameTitleInCourseToName'
BEGIN
    ALTER TABLE [dbo].[Courses] ADD [Name] [nvarchar](max) NOT NULL DEFAULT ''
    UPDATE Courses SET Name = Title
    DECLARE @var0 nvarchar(128)
    SELECT @var0 = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(N'dbo.Courses')
    AND col_name(parent_object_id, parent_column_id) = 'Title';
    IF @var0 IS NOT NULL
        EXECUTE('ALTER TABLE [dbo].[Courses] DROP CONSTRAINT [' + @var0 + ']')
    ALTER TABLE [dbo].[Courses] DROP COLUMN [Title]
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201712121951006_RenameTitleInCourseToName', N'CodeFirstExistingDb.Migrations.Configuration',  0x1F8B0800000000000400ED5B5B6FDB36147E1FB0FF20E8691B522B495FB6C06E9139C910ACB9204E8ABD05B4443BC4284A13A9C0C6B05FB687FDA4FD8591BA52BCE862BB4ED70605DA44E4F9786E3C3C3C3CFDF7EF7FC6EF5721769E6142514426EED1E8D07520F1A30091E5C44DD9E2CD8FEEFB77DF7E333E0FC295F3B19CF756CCE394844EDC27C6E213CFA3FE130C011D85C84F221A2DD8C88F420F0491777C78F8937774E4410EE1722CC719DFA584A11066BFF05FA711F161CC5280AFA200625A7CE723B30CD5B90621A431F0E1C49DF2191728A1EC7C8528E36C9ECD5DE71423C0599941BC701D4048C400E38C9E3C503863494496B3987F00F87E1D433E6F013085850027F5F4BEB21C1E0B59BC9AB084F253CAA27020E0D1DB42399E4ABE918ADD4A795C7DE75CCD6C2DA4CE5438714F53F61425AEA32E7532C5899866D4EF28A73A700C6307955370DF117FF8AC14B3348113025396007CE0DCA6738CFC5FE1FA3EFA1D9209493196B9E47CF2B1C607FEE936896298B0F51D5C14BC5F06AEE335E93C95B022936872B92E097B7BEC3AD77C7130C7B072024907331625F017486002180C6E016330210203666AD45657D6127F97AB71AFE3EA719D2BB0FA00C9923D4D5CFEA3EB5CA0150CCA2F05070F04F10DC7895892426D916BF08C96197FCA72D3284D28A4AE730771364E9F509CEF81C2608FD5948B240AEF225C394039F238E3FFFA82EBC8387C0F9225644D9EC65EED55ADBE96830CF5B59CEAD5D75EC2D79445CE386B993EE913AC64131FEF51D84D0CA99FA0388F639F98D10FF019E22EE5B7435CF0E9B709F26BAD7256311C8C536C20CD17FAEEEA9C7ECB5D5D6E5BCBAE2E377DEF48C34DBE8C92B591A91CF4B19E5373A50C69C1461D37459B36BEEEC1D2ACA802381FD7F8119F6DBC6463DB45BD4A1103E35E41F71AF9F61EF97ADB967BC750B37292578BFE6FF2A61E81438DADA6A0D2C7B94E298D7C9431D060AC8EA44D79CE49E07484D55C83B51C5C8DDCA550CC9D883330717FD0946407ADC49440ABC8D6843D1C8D8E549925E97A099D69BC83B766DCDE81B04D7BD680D9366F451B20A07268DB58B2E5E53557E5D5AD4BF96DB026ABF6D41E8F2730111B1A607E5DA73C4221C2F4E083888F62805BA552A87A062DA1F50A5F1D3983312422DEB4CADD67612981D3D7AF9651C2699772ACFE92C7064EC338054C0A1E6E71CA22F111AE98E1C079A0B038736811FC54F30BD019646A4E594722C5A734FF69025421530328BDA70B200F1DC88C51C5950E943C2C6BF4D97655482575AB6248A9AA34CB92CDAA1ED01D852BA625B5698ED41D7765184979EA39DE94B3BF0E72555AE5D7C3716740DE4CEE4608962072FEB69656BD31E902B785E73E015AE2B9DA662D625BE271B7F25A842F338C2A8AD4E5532FAF9F967556CF52681D5F8138E6799754782DBE38B3A2EAFA6636BC1A19E6189E4F0D45C98ADB6A259E4582255446A5ACFA0C30300722DA4C83509BD688999638522ED50C8BBAB5CA0053CE173F97DBC7561D351C2E05F905172B14475396276B0EA31366756F80416248CAA7114E43623F23EDD4799A2DD3E75F7484B1A770AE9D839A8A145F5535DECB1EF63D38CC1EC59934DC1E36C297B6870D41A9CFC950CAD0004CB96CD7409407FAE315A53919A9F8D41F43AACDC938D2E7FE58527A2763B5647D2FB71FEA737FEB2D61C967FA6C0A2BE94B6F8B17328B25371A661091B30EB78591EA4B374333EF311D195246DFE76490A6F73B0144FE662C226969BBAE9C5EA6A960CCB74E69F9E19C59EFDC1B3B4D2B433C030B5056FEB8A4A2665855EB7ACAABE6B99BBA447E81E8E50EF954B32B18769C5DE7F27D68534FC89176E707F2056B439E38C44086BA8DA8DD59D4295554A9EE2ECA1D655CDC1706748C9417887C8AEB70DE9F51202E0FB33565301C8909A3D91F788A118F63F5842B40D0025296D7E1DDE3C3A363A5E7E4F3E9FFF0280DB0E1BEA53781ECFD2901099D763E160C7C70955F0FC83348FC27907C1782D5F732D2166F3EA623E16B53960E646C0D08F84796B5060C04D35B05B662AED10E90E971DB66800402BC7D2B40C68A56CDBD24015C4DDC3F33AA13E7F2B7C78AF0C0B94978F839710E9DBF862AA171C60E5B5F22EDCFC1F007F2AF7A4B0D7A737ED554FF48BDA1BEDA122F7DB63925EAD6B0B4CAC02D5912DA36642F0B946C0F5B3BA71AB0F02778F26E5CF006BF471B5E1EF6F706DA527BD9F9B3A7B5F46970F8F63BE7CE5F3A5B9FFE8DB7A64D6C76A4DDD66EC819C49041E7D4CF53F229A03E08F4BD226E33EDEB670F8D1A0BDDDD021B7B4E7F6BEEC46FCC45A961B172DF8E63BADA4A86534D6630D617E5327D4DB8577FB11710F6E02C83FA6FB66FB8D9F7E9627D7C7CC9B3E573E8A1D19F8D2DD57DE57FC6587B64F2AA11BFE5CE236EDE3CF9B13CF95B1A685AFA674CE0B64E004B73CDBAB5B5C6B880BDB1C4D07A63EBBC31211BDB37CC4A31234B63167C9B76F6D0F9A3E8BBF94CD6DDF46268F7D86D634FD59CD2DADF63A9546FC2AEEDE03396D3772B6AD941D32EAAB900AEE609CA4BDBCB0AB9F3D62543AFD22777D601AD497A399F1F09D27F13E5E71145CB1A42BC3411E8370E836ACE255944E5B1A470544E51AEC6579081809F14A709430BE0333EEC434AB366F48F00A77CCA793887C125B949599C322E320CE7B8B1DFC5D9D6B67ED67FD5E4797C93953DE92E44E06C225182BD213FA7080715DF17861BBA05421C9A45C547D89289CACF725D215D47A42750A1BEEAACBF87618C3918BD2133F00C37E1ED81C20F7009FC75F92A6307E9364453EDE33304960908698151D3F35FB90F07E1EADD7FBC1FC78F2D3D0000 , N'6.1.3-40302')
END

IF @CurrentMigration < '201712121958324_DeletedDatePublishedColumnInCoursesTable'
BEGIN
    DECLARE @var1 nvarchar(128)
    SELECT @var1 = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(N'dbo.Courses')
    AND col_name(parent_object_id, parent_column_id) = 'DatePublished';
    IF @var1 IS NOT NULL
        EXECUTE('ALTER TABLE [dbo].[Courses] DROP CONSTRAINT [' + @var1 + ']')
    ALTER TABLE [dbo].[Courses] DROP COLUMN [DatePublished]
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201712121958324_DeletedDatePublishedColumnInCoursesTable', N'CodeFirstExistingDb.Migrations.Configuration',  0x1F8B0800000000000400ED5B5B6FDB36147E1FB0FF20E8691B522B495FB6C06E9139C910ACB9204E8ABD05B474EC08A3284DA4021BC37ED91EF693F61746DD295E74B15DA76B83026D22F27C3C371E1E1E9EFEFBF73FE3F7AB005BCF10533F2413FB6874685B40DCD0F3C97262276CF1E647FBFDBB6FBF199F7BC1CAFA58CE7B9BCEE394844EEC27C6A213C7A1EE1304888E02DF8D431A2ED8C80D030779A1737C78F8937374E40087B03996658DEF12C2FC00B25FF8AFD390B810B104E1ABD0034C8BEF7C6496A15AD728001A211726F694CFB8F063CACE573E659CCDB3B96D9D621F7156668017B685080919629CD193070A33168764398BF80784EFD711F0790B842914029CD4D3FBCA72789CCAE2D48425949B50160603018FDE16CA7164F28D546C57CAE3EA3BE76A66EB54EA4C8513FB34614F616C5BF25227531CA7D3B4FA1DE554079666ECA0720AEE3BE91F3E2BC12C896142206131C207D66D32C7BEFB2BACEFC3DF814C4882B1C825E7938F353EF04FB7711841CCD677B02878BFF46CCB69D23932614526D0E4725D12F6F6D8B6AEF9E2688EA1720241073316C6F00B10881103EF1631063149312053A3B2BAB456FA77B91AF73AAE1EDBBA42AB0F4096EC6962F31F6DEBC25F81577E293878203EDF709C88C509288B5CA3677F99F1272D370D939802B5AD3BC0D9387DF2A37C0F14067BACA65CC4617017E2CA01CA91C719FFD74DB90EB5C3F7285E026BF234766AAF6AF5B51C64A8AFE554AFBEF612BE262D7206D48DFD280F459F78AD0FF00CB84B7FED10177CFA6DECBBB56238AB1806E3147B403167DF8D99D36FB931CB9D67D898E5BEED1D2CB8972DC378AD652A077DACE7D45C49434ABC90C77501A38DAF7BB4D42BAA00CEC7157ED2CF265EB2B1ED0257A58881A1ABA07B0D5E7B0F5EBD6DCBBD63A85939C9AB45FF37A94F8FC021C7565D50E9E35CA79486AE9F31D060AC8EA44D79CE89677584D55C83B51C5C8DDCA5FC883B11676062FFA028C90C5A8929805691AD097B381A1DC9320BD2F5123AD378076FCDB8BD03619BF6AC01B36DDE8A364040E9D036B1644AAD6BAECADB5797F2DB607556EDA93D1E4F204E3734C2FCC64D7984F20953838F4F5C3F42B8552A89AA67D04AB55EE1CB2367100149E34DABDC7D1616123875FD6A19299C7629C7E82F796CE0348C53405CF0708B1316A61F61C53407CE0385E2CCA145F093CD9F82CE80C939651D89249F52FCA70950854C05A0F49E2E803C74F87A8C2AAE74A0E46159A1CFB6AB442AA85B164348558559866C56F680EE285C312DA84D71A4EEB82BC208CA93CFF1A69CFD7590ABD228BF1A8E3B03F266723742B00091F3B7B5B4F28D4915B82D3CF709D002CFD5366B11DB108FBB95D7227C99615451A4AE803A7909B42C953A865AE9F80A4511CFBB84DA69F1C59A1585D337B3E105C520C7705CAAA92B56DC562BF12C122D411A15B2EA33C4D01CA5D166EA05CAB446CC34C49172A9665854AD550698727EFA73B97D4C054ECDE152905F70B182F468CAF264C56154C2AC748D308A3549F934C44940CC67A4993A4FB345FAFC8B8A307624CE9573505191E4ABB2C67BD9C3BC0787D9A3389386DBC344F8D2F63021344A6C225063A03F5E514613918A4FFD31843A9A88237CEE8F25A46222564B86F672BE5B9FD15BBBAF21F7E8E3C046D29776E117328B218F19669034BF1C6E0B2DD5976E86668EA20BEF42F6DD278A0BD3FB45EB34D7D2167C94145B554E2FD35430FA1BA2B0FC70CE8CF7E38D9DA695219E2D797E56AAB8A4697DAFAAACF59457CE493775893CD9EFE50EF954BD2B68769C59E7E2DD65534FC89176E707E26568439E38C44086BA8DA8DC2FE4295554A9EE19D27D625CE4F6031A34CA643F9F625B9CF767DF4B13FDD99A320846E984D1EC0F3CC53E8F63F5842B44FC055096D7CCEDE3C3A363A9C5E3F369B77028F5B0E66EA4F65CECBDECEFA73AED2CEC0F7C1C152BFDE419C5EE138ABF0BD0EA7B11698BF719DD91F0B5294B05D2BCC46F85D7786DCF44DFF6AD3D0684B77F69CF58518AA597C483D5C4FE33A33AB12E7F7BAC080FAC9B98478C13EBD0FA6BA8121AC7E2B0F505D2FE1C0C7F7FFEAA77C1A027DD574DF50FAE1BEAAB2D575267EBB3986E0D0BAB0CDC9225A16943F6B240C9F6B0B573AA010B7F8217E5C69D6CF073AFA6B0BFBF27C69672C9CE5F158D95458DC3B75F1377FE90D8FAB2AEBDE86C62B323E5827543CE000303EBD4CDB3E829A22EF2D4BD925E40DAD7CFDEF11416BA1FE337F69CFED6DC89DFE8EB48C362E5BE1D47771B150C279B4C63AC2FCA65FA9A70AFFE62BEF3EFC15906B5B76CDFCFB2EFD3C5F8B6F79267CBE7D0A2A2BECA1A0AF2D2FF1D31B6A0E4859E89EDCD436EDE3CF931BCA81BFA535ADA5374E0A6877643EFCABAB57345BB80B96F43D3D9626A6CD1216BBB23F44AD1230B63067C9376F6D05823E9BBF9B2D5DD53A2E9A6D86DDF4CD5FBD1DA3E63282E6FC2AEE9E0D356C0772B6AD9A0D22EAABE662DE709D2E3D8CB0AB9F3CE204D2BD02777D6019D3F6A059E1F09C27FA4E4E711F5973544FA3844C06D1C06D59C4BB208CB6349E2A89C225D8DAF80218F9F14A731F317C8657CD8054AB35EEF8F08277CCA793007EF92DC242C4A18171982396EECF7F46C6B5B3F6B6F6AF23CBEC9CA9E74172270367D2E02DC909F131F7B15DF179A1BBA01223D348B8A4F6A4B96567E96EB0AE93A243D810AF55567FD3D0411E660F486CCD0336CC2DB03850FB044EEBA7C483183741BA2A9F6F1998F96310A688151D3F35FB90F7BC1EADD7FBB3A21D94F3C0000 , N'6.1.3-40302')
END

IF @CurrentMigration < '201712122001135_DeletedCatagoryColumnInCoursesTable'
BEGIN
    IF object_id(N'[dbo].[FK_dbo.Courses_dbo.Categories_Category_Id]', N'F') IS NOT NULL
        ALTER TABLE [dbo].[Courses] DROP CONSTRAINT [FK_dbo.Courses_dbo.Categories_Category_Id]
    IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_Category_Id' AND object_id = object_id(N'[dbo].[Courses]', N'U'))
        DROP INDEX [IX_Category_Id] ON [dbo].[Courses]
    DECLARE @var2 nvarchar(128)
    SELECT @var2 = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(N'dbo.Courses')
    AND col_name(parent_object_id, parent_column_id) = 'Category_Id';
    IF @var2 IS NOT NULL
        EXECUTE('ALTER TABLE [dbo].[Courses] DROP CONSTRAINT [' + @var2 + ']')
    ALTER TABLE [dbo].[Courses] DROP COLUMN [Category_Id]
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201712122001135_DeletedCatagoryColumnInCoursesTable', N'CodeFirstExistingDb.Migrations.Configuration',  0x1F8B0800000000000400ED1BDB4EE346F4BD52FFC1F2535BB131B02F2D4A76450354A8CB45845DF50D0DF649B03A1EBB9E314A54F5CBFAD04FEA2FF4F89AF15C1C3BA1D0DDA295583233E77E9933E784BFFFFC6BFC7E1951E711521EC66CE21E8CF65D07981F07215B4CDC4CCCDF7CEFBE7FF7F557E3D3205A3A9FEA736FF37308C9F8C47D102239F23CEE3F4044F8280AFD34E6F15C8CFC38F248107B87FBFB3F7807071E200A177139CEF82663228CA0F8801FA731F3211119A11771009457EBB8332BB03A9724029E101F26EE144F9C852917A7CB900B64F3E4DE758E6948909519D0B9EB10C6624104327AF491C34CA4315BCC125C20F47695009E9B13CAA112E0687DBCAF2CFB87B92CDE1AB046E5675CC4D14084076F2BE5782AF8562A761BE5A1FA4E51CD62954B5DA870E21E67E2214E5D47257534A5697ECCA8DF5109B5E718F6F61AA740DFC9FFE1A98C8A2C8509834CA484EE39D7D93D0DFD9F61751BFF0A6CC2324A652E914FDC6B2DE0D2751A27908AD50DCC2BDECF03D7F1DA709E0AD8804930A55CE74CBC3D749D4B244EEE29344E20E96026E2147E02062911105C13212065390E28D4A8515768E53F6B6AE875A81ED7B920CB0FC016E261E2E2AFAE73162E21A8572A0E3EB210030E81449A8146E4923C868B823F85DC34CE520EDC756E8016FBFC214CCA18A80C76D71C394BE3E826A68D03D43B7733FCDFCFB98E8DDBB7245D8068F334F6D65ED5E96B2592A1BE5642BDFADA4BF89A42E404B89F8649998AFE655A1FE011E826FD75A338C3E3D769E8AF1583AC52188CA78A01CD9C7D03B384DF3130EBC8B304661DB77D79BA250B334325C2BB727FCD8DB4ACE508796FA704811886660704794D0D9FCD35D4C3B9543F3739DE76B70F2A6F11A7ABC1F74F05F7EA66CFEE6636DB1E731EFB61C175CBE94AC76A7379CA02A7238595ECAE7D137946FB85095A0C094FDCEF34B1CD081BB75D232CB25927B6B12749D22DA0724FD858B255736BAEEA82BFCDD8FE6874D021A9ED2E1AAE3DF46748738722141F791C2324644277FE90F9614268A7540A54CFA0C9B5DEE057774E200196FB7BA7DC7D084B35834EBF21A384F326E558FDA50C138411080169C5C335CD449C2FC25218B21EBE85ABC4C7ABE053CD9F239D8150CB9875502A3EA5F94F1B41733368086AEFD980A0BC3734E822D036D12EB3786826DF5C0D0A1649DDAA18D525269D30DC71AAE5BB9351C3B3A42ACD79BAD38F84A2E44FBD31DA12F590562D507581BB52539FE424F1DCB85887D8965CB459791DC2D7174D1341EB869357769CEACE9467694D8D2F4892E09D27B5AAAA156756F5A9DECC86F76FA21287E773431BA7E1B6A18437385980B22B95352744907B9247DA3488B463AD7C6109A79A543B25E8D6AA23AC3E9FFF5E878FAD9F6448AC15F8198A15E569B9A8513487D1018B4E21A124351444D3986611B3DF0F76E8B2C491E1CB151DC3D85338D7EE004D458AAFAA1AEF650F7B0C0EB347958F87DBC306F8D2F6B0616875346444AD8DFEF8AAAE858CA95AEA8F436A5BC878A4E5FEB8A43244C6D5519DBC98EF5A2ECC618E9B9702C3BDD608F5D22EFB5229645D28ED9C45EAB26A8B3C6205FDD2CDD2AE514CE9BDAA3CFB64F0EAA8394B1BBC3E2FB38CED9C56A1AAEBA497452A4CE627914478184FD637592F9E10C54086D42A5237A2564CAA471A176A8A4AA5781C5785DC80E1675DD995475C07797F0C83BCAA9BADB88068941F18CD7EA3531AA2D3AE0F5C1016CE818BB239E51EEE1F1C2AE3D3FFCE28D3E33CA0BDE699CFDE5F0B739D6EECA00D1C3CC82D35F64852FF81A4DF4464F9AD8CA97FDBCC3690FB5F2BABD7946B277CAD495621FAAE73AC1408DD7D8A55B0A27585CE5900CB89FB7B0175E49CFF72D700EE395729668C2367DFF9E3893C50BB83FE6FEE377C7CF1AAAEFEA96D4BF7EAAA54F4D3E61A62B386252AC302B201B405642F0BD46C0FA35D420D20BCD50CC758696AADCF1E038803ADC2BD622740418073EC9765CC94709F04BABAF20AB09B7ED177D658D83CF6D9760C62EDCA3CF9DCC3FA40181C2E4F3FEBE8761CD37340329C6A3283B1BE2897E96BC267F517FBA3EB199C65D02075F7C969EF4CF5A4A3D2E7B3F967330CD56720967698F2C558EBB0B37C694FDCE03E46F396F79F657E659984760C424DC86D632DC394D4362435A135CE092DE3D355E7F0D4C8B43477EDA51433F7D29E45069B76368D709B3164E724D7D2FA3204BA3E0CD93CC3956456FA73BBCF6F4D53E26E51CD1D35F51255DAE72F2BE4930FA90D53E91E22F6B0FED30CA1F5FE20E64BE94F283059F370B14691FF410503BF95299B33E76C1ED7395BE1A83EA23C1D2E409000D3E8712AC239F1056EFBC079F195AF4F846678E434BA87E09C5D6522C9048A0CD13D6D7DBF224FFC5DF48B497B9BE7F155D194E14F2102B219A20870C57ECC421A347C9F195E301614F98D52BD88735B8AFC65BC5835982E63D61351A5BEE622BC8528A1888C5FB11979846D78FBC8E1032C88BFAADBBC76249B0DD156FBF824248B9444BCC2B186C78FE8C341B47CF70F6DA2882249340000 , N'6.1.3-40302')
END

IF @CurrentMigration < '201712122003099_DeletedCategriesTable'
BEGIN
    CREATE TABLE [dbo].[_Categories] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](max),
        CONSTRAINT [PK_dbo._Categories] PRIMARY KEY ([Id])
    )
    INSERT INTO _Categories (Name) SELECT Name FROM Categories
    DROP TABLE [dbo].[Categories]
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201712122003099_DeletedCategriesTable', N'CodeFirstExistingDb.Migrations.Configuration',  0x1F8B0800000000000400ED1ADB6EDB36F47DC0FE41D0D336A45692BE6C81DD227392215873419C167B0B68E9D81146519A4805368A7DD91EF649FB851D5D4DF1224B719AAC6B112089499EFB8587E7F89FBFFE1EBF5D45D479809487319BB807A37DD701E6C741C8961337138B573FBA6FDF7CFBCDF8348856CE87FADCEBFC1C42323E71EF85488E3C8FFBF710113E8A423F8D79BC10233F8E3C12C4DEE1FEFE4FDEC1810788C2455C8E33BEC9980823283EE0C769CC7C484446E8451C00E5D53AEECC0AACCE25898027C487893BC5136761CAC5E92AE402D93C99BBCE310D09B23203BA701DC2582C8840468FDE7398893466CB59820B84DEAE13C0730B423954021C6D8EF79565FF3097C5DB00D6A8FC8C8B381A88F0E075A51C4F057F948ADD4679A8BE5354B358E752172A9CB8C799B88F53D751491D4D699A1F33EA775442ED3986BDBDC629D077F21F3C955191A53061908994D03DE73A9BD3D0FF15D6B7F1EFC0262CA354E612F9C4BDD6022E5DA77102A958DFC0A2E2FD3C701DAF0DE7A9800D980453CA75CEC4EB43D7B944E2644EA1710249073311A7F00B30488980E09A080129CB7140A1468DBA422BFF5D5343AF43F5B8CE0559BD03B614F71317FF759DB3700541BD5271F09E8518700824D20C342297E4215C16FC29E4A6719672E0AE7303B4D8E7F76152C64065B0BBE6C8591A4737316D1CA0DEB99BE15F3FE73A366EDF927409A2CDD3D8DB7855A7AF954886FA5A09F5D5D75EC2D7142227C0FD344CCA54F48969BD8307A0DBF4D78DE20C8F5FA7A1BF510CB24A61309E2A063473F60DCC127EC7C0AC23CF129875DCF6E5E9962CCD0C9508EFCAFD0D37D2B29623E4BD9D120462189A1D10E46B6AF86CAEA11ECEA5FAB9C9F1FA38D731E7B11F160CB4182B89B765396581D3E1E6A5E636FCA3FAD095C2049D07094FDC1F34E5981136A26D10161EDF896DEC4992740BA8E4121B4BB61B7FC3555D14B619DB1F8D0E3A24B5E5ABE1DAC3D08234F76D42F121C031584326F4380C991F2684764AA540F58CDF5CEB0D7E75E704126079E875CADD87B074AFE8F41B324A66D9A61CABBF94618230022120AD78B8A69988F345580943EEC5F752957E79950754F3E7486720D4AB6E13948A4F69FED346D0640F0D41ED3D5B1094B945832E024D019514A53250A528E9842183A936EB4E230DA392909AD9BB138784A2E44FBD76DA12F590562D3F7481BB924A9FB422F1DC384787D8962CB25D791DC2D75744E3FB9B768257F613EABE8367693C8C2F4892E0C5293522AA15675675215ECD86BFCEA31287E773C323BDE1B6A18465005982B22B954527449039C963641A44DAB156A45B62A826D50E66DD5A7570D5E7F3FFEBF0B1750B0C29B1023F43B1A23CA116858EE6303A60D1072294A486AA6A1AD32C62F6CC6E872EEB2419BE5CD1318C3D85732D7B6B2A527C55D5782F7BD86370983DAA4C3ADC1E36C097B6870D43EBBD2A236A6DF4C757BD49654CD5527F1CD2A354C6232DF7C725151032AE8EBAE2C57CD772610E73DCFC121FEEB546A89776D94F6D86F66568CA235589D327555447CDE9C0A0DEFC3E37BE0A5B1591AE935E16A93099AB6689F0309EAC657B2F9E10C54086D4724537A256B5A8471A176AAA17A54A195715C380194A5D4294475C07797F0883BC7C98ADB98068941F18CDFEA0531AA2D36E0E5C10162E808BB295E21EEE1F1C2A5398FFCE44C4E33CA0BDC622CFDE0D0A739D6EEDF70CEC5FCA0D20F64052FF9EA4DF4564F5BD8C496FF20CEDEB7FD1CAEAD52CDF095FAB215E88BE6B3B3C0542776F8617AC688D837316C06AE27E2CA08E9CF3DFEE1AC03DE72AC58C71E4EC3B7F3E91076A77D097E67E0363F591FAEABA7AF5D3E64B71BB86252AC33CAC01B479582F0BD46C0FA35D420D20FCA8BEB5B174D29A463D9AAE075AC976C54E808200E7D82FEFE529E13E097475E5254D37FDA2D7A6B1B0BDD5FDD8D6AFF53DFBE4BD5E6BC53B385C9EBEBFDBED38A6FA56329C6A3283B1FE572ED3D784CFEA2FF657C43338CBA0E1D1EED3A2DE99EA49C743CF67F3CF6600A4778F2DFD1CE50B63D6014FF9749CB8C13C46F396F79FA5F36F99FE740C7F4CC86D0301C364C8361832A1354E58CC0C9B314B7B16FC36CEB70DA69AE14AE77CCAD2673104A1DEE2DD3E999264569A41BB4FA54CB3AF6E51CDED1BF582539A822F2BE4938FDE0CB3B61E22F6B0FED38CD6F46614E632E96BBF984879B8DCA0C8BF04CCC06F65B1E6CC395BC4753E5538AA8F2865FD050812608A3B4E45B820BEC06D1F382FBE0DF381D00C8F9C467308CED95526924CA0C810CD69EBDB357952EEA25FCC0FDB3C8FAF8A0E007F0A1190CD1045802BF67316D2A0E1FBCCF0BAB0A0C8B37DF55ACD6D29F257EB72DD60BA8C594F4495FA9A4BEA16A28422327EC566E4011EC3DB7B0EEF6049FC75DD53B423D96E88B6DAC7272159A624E2158E0D3C7E441F0EA2D59B7F016E155D52FD2E0000 , N'6.1.3-40302')
END

IF @CurrentMigration < '201712122132456_PopulateCategoriesTable'
BEGIN
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201712122132456_PopulateCategoriesTable', N'CodeFirstExistingDb.Migrations.Configuration',  0x1F8B0800000000000400ED1ADB6EDB36F47DC0FE41D0D336A45692BE6C81DD227392215873419C167B0B68E9D81146519A4805368A7DD91EF649FB851D5D4DF1224B719AAC6B112089499EFB8587E7F89FBFFE1EBF5D45D479809487319BB807A37DD701E6C741C8961337138B573FBA6FDF7CFBCDF8348856CE87FADCEBFC1C42323E71EF85488E3C8FFBF710113E8A423F8D79BC10233F8E3C12C4DEE1FEFE4FDEC1810788C2455C8E33BEC9980823283EE0C769CC7C484446E8451C00E5D53AEECC0AACCE25898027C487893BC5136761CAC5E92AE402D93C99BBCE310D09B23203BA701DC2582C8840468FDE7398893466CB59820B84DEAE13C0730B423954021C6D8EF79565FF3097C5DB00D6A8FC8C8B381A88F0E075A51C4F057F948ADD4679A8BE5354B358E752172A9CB8C799B88F53D751491D4D699A1F33EA775442ED3986BDBDC629D077F21F3C955191A53061908994D03DE73A9BD3D0FF15D6B7F1EFC0262CA354E612F9C4BDD6022E5DA77102A958DFC0A2E2FD3C701DAF0DE7A9800D980453CA75CEC4EB43D7B944E2644EA1710249073311A7F00B30488980E09A080129CB7140A1468DBA422BFF5D5343AF43F5B8CE0559BD03B614F71317FF759DB3700541BD5271F09E8518700824D20C342297E4215C16FC29E4A6719672E0AE7303B4D8E7F76152C64065B0BBE6C8591A4737316D1CA0DEB99BE15F3FE73A366EDF927409A2CDD3D8DB7855A7AF954886FA5A09F5D5D75EC2D7142227C0FD344CCA54F48969BD8307A0DBF4D78DE20C8F5FA7A1BF510CB24A61309E2A063473F60DCC127EC7C0AC23CF129875DCF6E5E9962CCD0C9508EFCAFD0D37D2B29623E4BD9D120462189A1D10E46B6AF86CAEA11ECEA5FAB9C9F1FA38D731E7B11F160CB4182B89B765396581D3E1E6A5E636FCA3FAD095C2049D07094FDC1F34E5981136A26D10161EDF896DEC4992740BA8E4121B4BB61B7FC3555D14B619DB1F8D0E3A24B5E5ABE1DAC3D08234F76D42F121C031584326F4380C991F2684764AA540F58CDF5CEB0D7E75E704126079E875CADD87B074AFE8F41B324A66D9A61CABBF94618230022120AD78B8A69988F345580943EEC5F752957E79950754F3E7486720D4AB6E13948A4F69FED346D0640F0D41ED3D5B1094B945832E024D019514A53250A528E9842183A936EB4E230DA392909AD9BB138784A2E44FBD76DA12F590562D3F7481BB924A9FB422F1DC384787D8962CB25D791DC2D75744E3FB9B768257F613EABE8367693C8C2F4892E0C5293522AA15675675215ECD86BFCEA31287E773C323BDE1B6A18465005982B22B954527449039C963641A44DAB156A45B62A826D50E66DD5A7570D5E7F3FFEBF0B1750B0C29B1023F43B1A23CA116858EE6303A60D1072294A486AA6A1AD32C62F6CC6E872EEB2419BE5CD1318C3D85732D7B6B2A527C55D5782F7BD86370983DAA4C3ADC1E36C097B6870D43EBBD2A236A6DF4C757BD49654CD5527F1CD2A354C6232DF7C725151032AE8EBAE2C57CD772610E73DCFC121FEEB546A89776D94F6D86F66568CA235589D327555447CDE9C0A0DEFC3E37BE0A5B1591AE935E16A93099AB6689F0309EAC657B2F9E10C54086D4724537A256B5A8471A176AAA17A54A195715C380194A5D4294475C07797F0883BC7C98ADB98068941F18CDFEA0531AA2D36E0E5C10162E808BB295E21EEE1F1C2A5398FFCE44C4E33CA0BDC622CFDE0D0A739D6EEDF70CEC5FCA0D20F64052FF9EA4DF4564F5BD8C496FF20CEDEB7FD1CAEAD52CDF095FAB215E88BE6B3B3C0542776F8617AC688D837316C06AE27E2CA08E9CF3DFEE1AC03DE72AC58C71E4EC3B7F3E91076A77D097E67E0363F591FAEABA7AF5D3E64B71BB86252AC33CAC01B479582F0BD46C0FA35D420D20FCA8BEB5B174D29A463D9AAE075AC976C54E808200E7D82FEFE529E13E097475E5254D37FDA2D7A6B1B0BDD5FDD8D6AFF53DFBE4BD5E6BC53B385C9EBEBFDBED38A6FA56329C6A3283B1FE572ED3D784CFEA2FF657C43338CBA0E1D1EED3A2DE99EA49C743CF67F3CF6600A4778F2DFD1CE50B63D6014FF9749CB8C13C46F396F79FA5F36F99FE740C7F4CC86D0301C364C8361832A1354E58CC0C9B314B7B16FC36CEB70DA69AE14AE77CCAD2673104A1DEE2DD3E999264569A41BB4FA54CB3AF6E51CDED1BF582539A822F2BE4938FDE0CB3B61E22F6B0FED38CD6F46614E632E96BBF984879B8DCA0C8BF04CCC06F65B1E6CC395BC4753E5538AA8F2865FD050812608A3B4E45B820BEC06D1F382FBE0DF381D00C8F9C467308CED95526924CA0C810CD69EBDB357952EEA25FCC0FDB3C8FAF8A0E007F0A1190CD1045802BF67316D2A0E1FBCCF0BAB0A0C8B37DF55ACD6D29F257EB72DD60BA8C594F4495FA9A4BEA16A28422327EC566E4011EC3DB7B0EEF6049FC75DD53B423D96E88B6DAC7272159A624E2158E0D3C7E441F0EA2D59B7F016E155D52FD2E0000 , N'6.1.3-40302')
END

  //将以上保存发给DBA即可。我们也可以在PM中使用Update-Database -Script -SourceMigration:[Migr1] -TargetMigration:[Migr2]来将目标范围的迁移文件
    //转换成Sql文件保存。

//暂时想到这么多，最后更新2018/01/03
